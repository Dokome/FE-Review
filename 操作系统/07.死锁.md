## 死锁

> 概念、预防

当两个线程为了保护两个不同的共享资源而使用了两个互斥锁，那么这两个互斥锁应用不当的时候，可能会造成**两个线程都在等待对方释放锁**，在没有外力的作用下，这些线程会一直相互等待，就没办法继续运行，这种情况就是发生了**死锁**。

#### 产生的条件

- **互斥条件**：多个线程不能同时使用同一个资源。
- **持有并等待条件**：当线程 A 已经持有了资源 1，又想申请资源 2，而资源 2 已经被线程 C 持有了，所以线程 A 就会处于等待状态，但是 **线程 A 在等待资源 2 的同时并不会释放自己已经持有的资源 1**。
- **不可剥夺条件**：当线程已经持有了资源 ，**在自己使用完之前不能被其他线程获取**，线程 B 如果也想使用此资源，则只能在线程 A 使用完并释放后才能获取。
- **环路等待条件**：在死锁发生的时候，**两个线程获取资源的顺序构成了环形链**。

#### 避免死锁的发生

避免死锁问题就只需要破环其中一个条件就可以，最常见的并且可行的就是 使用 **资源有序分配 **法，来破环环路等待条件。